import{a as H,b as Q}from"./chunk-AEUY4XSX.js";import{f as $,g as L,i as V,k as N}from"./chunk-NBXE2DQI.js";import{$ as E,Eb as P,Fb as y,Ga as a,La as j,Lb as b,N as f,O as C,Pa as F,Q as w,U as D,Ua as u,V as S,_ as I,ab as A,ca as O,fb as d,ga as p,gb as i,hb as o,ib as k,jb as R,mb as M,nb as m,ub as U,wb as s,xb as z,yb as _,zb as q}from"./chunk-WWLSA4OQ.js";function x(r,t){let n=!t?.manualCleanup?t?.injector?.get(O)??S(O):null,c=B(t?.equal),l;t?.requireSync?l=p({kind:0},{equal:c}):l=p({kind:1,value:t?.initialValue},{equal:c});let v,T=r.subscribe({next:g=>l.set({kind:1,value:g}),error:g=>{l.set({kind:2,error:g}),v?.()},complete:()=>{v?.()}});if(t?.requireSync&&l().kind===0)throw new C(601,!1);return v=n?.onDestroy(T.unsubscribe.bind(T)),b(()=>{let g=l();switch(g.kind){case 1:return g.value;case 2:throw g.error;case 0:throw new C(601,!1)}},{equal:t?.equal})}function B(r=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&r(t.value,e.value)}var h=class r{constructor(t){this.http=t;this.loadTasks()}apiUrl="/api/tasks";httpOptions={headers:new H({"Content-Type":"application/json"})};_tasks=p([]);_loading=p(!1);_error=p(null);tasks=this._tasks.asReadonly();loading=this._loading.asReadonly();error=this._error.asReadonly();taskCount=b(()=>this._tasks().length);completedTasks=b(()=>this._tasks().filter(t=>t.status==="completed"));pendingTasks=b(()=>this._tasks().filter(t=>t.status==="pending"));loadTasks(){this._loading.set(!0),this._error.set(null),this.http.get(this.apiUrl).subscribe({next:t=>{this._tasks.set(t),this._loading.set(!1)},error:t=>{this._error.set(t.message||"Failed to load tasks"),this._loading.set(!1)}})}getTasks(){return this.http.get(this.apiUrl)}getTask(t){return this.http.get(`${this.apiUrl}/${t}`)}createTask(t){return this._loading.set(!0),this.http.post(this.apiUrl,t,this.httpOptions).pipe(f({next:e=>{this._tasks.update(n=>[...n,e]),this._loading.set(!1)},error:e=>{this._error.set(e.message||"Failed to create task"),this._loading.set(!1)}}))}updateTask(t,e){return this._loading.set(!0),this.http.put(`${this.apiUrl}/${t}`,e,this.httpOptions).pipe(f({next:n=>{this._tasks.update(c=>c.map(l=>l.id===t?n:l)),this._loading.set(!1)},error:n=>{this._error.set(n.message||"Failed to update task"),this._loading.set(!1)}}))}deleteTask(t){return this._loading.set(!0),this.http.delete(`${this.apiUrl}/${t}`,this.httpOptions).pipe(f({next:()=>{this._tasks.update(e=>e.filter(n=>n.id!==t)),this._loading.set(!1)},error:e=>{this._error.set(e.message||"Failed to delete task"),this._loading.set(!1)}}))}getTasksAsSignal(){return x(this.getTasks(),{initialValue:[]})}getTaskAsSignal(t){return x(this.getTask(t),{initialValue:null})}addTaskToState(t){this._tasks.update(e=>[...e,t])}removeTaskFromState(t){this._tasks.update(e=>e.filter(n=>n.id!==t))}updateTaskInState(t){this._tasks.update(e=>e.map(n=>n.id===t.id?t:n))}clearError(){this._error.set(null)}static \u0275fac=function(e){return new(e||r)(D(Q))};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})};function W(r,t){r&1&&k(0,"span",11)}function X(r,t){r&1&&(i(0,"div",12),k(1,"div",13),i(2,"p"),s(3,"Loading data from PostgreSQL..."),o()())}function Y(r,t){if(r&1){let e=R();i(0,"div",14)(1,"div",15),s(2,"\u26A0\uFE0F"),o(),i(3,"p"),s(4),o(),i(5,"button",16),M("click",function(){I(e);let c=m();return E(c.fetchTasks())}),s(6,"Retry"),o()()}if(r&2){let e=m();a(4),z(e.error)}}function Z(r,t){if(r&1&&(i(0,"th"),s(1),P(2,"titlecase"),o()),r&2){let e=t.$implicit;a(),_(" ",y(2,1,e)," ")}}function tt(r,t){if(r&1&&(i(0,"td"),P(1,"titlecase"),s(2),o()),r&2){let e=t.$implicit,n=m().$implicit;A("data-label",y(1,2,e)),a(2),_(" ",n[e]," ")}}function et(r,t){if(r&1&&(i(0,"tr"),u(1,tt,3,4,"td",21),o()),r&2){let e=t.$implicit,n=t.index,c=m(2);U("even",n%2===0),a(),d("ngForOf",c.getObjectKeys(e))}}function nt(r,t){if(r&1&&(i(0,"div",17)(1,"div",18)(2,"h3"),s(3),o()(),i(4,"div",19)(5,"table",20)(6,"thead")(7,"tr"),u(8,Z,3,3,"th",21),o()(),i(9,"tbody"),u(10,et,2,3,"tr",22),o()()()()),r&2){let e=m();a(3),q(" Database Results (",e.tasks.length," record",e.tasks.length===1?"":"s",") "),a(5),d("ngForOf",e.getObjectKeys(e.tasks[0])),a(2),d("ngForOf",e.tasks)}}function rt(r,t){r&1&&(i(0,"div",23)(1,"div",24),s(2,"\u{1F4ED}"),o(),i(3,"p"),s(4,"No data available"),o()())}var K=class r{constructor(t){this.tasksService=t}tasks=[];showData=!1;loading=!1;error="";ngOnInit(){this.fetchTasks()}fetchTasks(){this.loading=!0,this.error="",this.tasksService.getTasks().subscribe({next:t=>{console.log("Tasks API Response:",t),this.tasks=t,this.loading=!1},error:t=>{console.error("Error fetching tasks:",t),this.error="Failed to fetch data from server",this.loading=!1}})}toggleDataDisplay(){this.showData=!this.showData}getObjectKeys(t){return Object.keys(t)}static \u0275fac=function(e){return new(e||r)(j(h))};static \u0275cmp=F({type:r,selectors:[["app-api"]],decls:16,vars:7,consts:[[1,"api-container"],[1,"header-section"],[1,"description"],[1,"button-section"],[1,"btn-primary-lg",3,"click","disabled"],[1,"button-icon"],["class","spinner",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","table-container",4,"ngIf"],["class","no-data-container",4,"ngIf"],[1,"spinner"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"error-icon"],[1,"retry-button",3,"click"],[1,"table-container"],[1,"table-header"],[1,"table-wrapper"],[1,"data-table"],[4,"ngFor","ngForOf"],[3,"even",4,"ngFor","ngForOf"],[1,"no-data-container"],[1,"no-data-icon"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),s(3,"PostgreSQL Data Viewer"),o(),i(4,"p",2),s(5," Click the button below to view data from the PostgreSQL database "),o()(),i(6,"div",3)(7,"button",4),M("click",function(){return n.toggleDataDisplay()}),i(8,"span",5),s(9,"\u{1F4CA}"),o(),s(10),u(11,W,1,0,"span",6),o()(),u(12,X,4,0,"div",7)(13,Y,7,1,"div",8)(14,nt,11,4,"div",9)(15,rt,5,0,"div",10),o()),e&2&&(a(7),d("disabled",n.loading),a(3),_(" ",n.showData?"Hide PostgreSQL Data":"Click for PostgreSQL Data"," "),a(),d("ngIf",n.loading),a(),d("ngIf",n.loading),a(),d("ngIf",n.error&&!n.loading),a(),d("ngIf",n.showData&&n.tasks.length>0&&!n.loading&&!n.error),a(),d("ngIf",n.showData&&n.tasks.length===0&&!n.loading&&!n.error))},dependencies:[N,$,L,V],styles:['.api-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;font-size:2.5rem;margin-bottom:.5rem;font-weight:600}.header-section[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1.1rem;margin:0}.button-section[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:2rem}.btn-primary-lg[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%], .btn-primary-lg[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{pointer-events:none}.btn-primary-lg[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{font-size:1.2rem}.btn-primary-lg[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid black;border-radius:50%;animation:spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#9dbb9b}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid rgb(157,187,155);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;margin:0}.error-container[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:#fee;border:1px solid #fcc;border-radius:10px;margin:1rem 0}.error-container[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d32f2f;margin-bottom:1rem;font-size:1.1rem}.error-container[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{background:#d32f2f;color:#fff;border:none;padding:.5rem 1rem;border-radius:5px;cursor:pointer;font-weight:600;transition:background .3s ease}.error-container[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]:hover{background:#b71c1c}.table-container[_ngcontent-%COMP%]{margin-top:2rem}.table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{margin-bottom:1rem}.table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-size:1.5rem;margin:0;text-align:center}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;border-radius:10px;box-shadow:0 10px 15px #0000001a;background:#fff}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.95rem}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9dbb9b 0% 100%)}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#000;font-weight:600;padding:1rem;text-align:left;border-bottom:2px solid rgba(0,0,0,.1);white-space:nowrap}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0;transition:background-color .2s ease}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#c6f1c3}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.even[_ngcontent-%COMP%]{background-color:#f7fafc}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.even[_ngcontent-%COMP%]:hover{background-color:#c6f1c3}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;color:#4a5568;border-right:1px solid #e2e8f0}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none}.no-data-container[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#718096}.no-data-container[_ngcontent-%COMP%]   .no-data-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.no-data-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin:0}@media (max-width: 768px){.api-container[_ngcontent-%COMP%]{padding:1rem}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.fetch-button[_ngcontent-%COMP%]{padding:.8rem 1.5rem;font-size:1rem}.data-table[_ngcontent-%COMP%]{font-size:.85rem}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}}@media (max-width: 768px) and (max-width: 600px){.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:1rem;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;background:#fff}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;border:none;padding:.5rem 0;text-align:left}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label) ": ";font-weight:600;color:#9dbb9b}}']})};export{K as Api};
